<html>
     <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="apple-mobile-web-app-capable" content="yes">

    <title>MapTest Help</title>
    
<link rel="stylesheet" href="lib/theme/default/style.css" type="text/css">
<link rel="stylesheet" type="text/css" href="maptest.css">
<link rel="stylesheet" type="text/css" href="help.css">

</head>
<body>
<h1>MapTest</h1>

Displays WMS and ArcGIS REST map services as map overlays.
Supports debugging errors and testing map request performance.

<h2>Map Service Configuration</h2>

<h3>Configure via URL</h3>

Basic configuration can be loaded via URL parameters.  

<pre class='help-code'>
http://apphost/maptest.html 
         [ ?host=http://some.host/mapservice ] 
         [ &amp;tile=t ] 
         [ &amp;lyr=LYRA,LYRB,LYRC ] 
         [ &amp;extent=MIN_LON,MIN_LAT,MAX_LON,MAX_LAT ]
</pre>

<p>
The <a href=''><b>Permalink</b></a> link opens a new page with the top map overlay as parameters.

<ul>
	<li><code>host</code>, <code>tile</code>, <code>lyr</code>, <code>extent</code> parameters are optional</li>
</ul>

<h3>Configure via Text</h3>

Map services are configured by a simple line-oriented text configuration format.
The configuration schema supports the following:
<ul>
	<li><b>URL</b> for the map service host, prefixed with <code>http:</code> or <code>https:</code></li>
	<li><b>Display Name</b> - <i>(Optional)</i> specified as: <code>name: name text</code> </li>
	<li><b>Metadata link</b> - <i>(Optional)</i> specified as: <code>meta-url: link</code> </li>
	<li><b>Tiling</b> - <i>(Optional)</i> specified as: <code>tile: t</code> </li>
	<li><b>URL parameter</b> - <i>(Optional, Multiple)</i> specified as: <code>param: name=value</code> </li>
	<li>List of one or more map service <b>layers</b>
		<ul>
			<li>Layer names can be comma-separated or on separate lines</li>
			<li>A layer can be specified as visible by appending <code>+</code> </li>
			<li>A layer style can be specified by appending <code>*style</code> </li>
		</ul>
		</li>
	<li>Comment lines start with '#' or '//'</li>
</ul>

Multiple services can be configured, separated by a blank line.

<p>
<h4>Example: Text Configuration for a single map service</h4>
<pre class='help-code'>
# This is a comment
// This is another comment
http://some.host/mapservice
name: Some Mapservice
meta-url: http://some.host/mapservice/meta
tile: t
param: name=value
param: name2=value2
LAYER1,LAYER2
LAYER3+
LAYER4*STYLE
</pre>

<h3>Configure Layers via WMS Capabilities UI</h3>

The layers can be configured by a UI dialog driven from the WMS capabilities requested from a service.
<ul>
	<li><b>Configure the host</b> - Enter the host URL in the configuration panel
and click <button>Add to Layer List</button></li>
    <li>An Overlay for the host is added to the Layer List</li>
	<li><b>Add WMS layers</b> - Open the WMS Layers panel by clicking <button class='btn-wms-layer-add'>+</button> </li>
	<li><b>Add a layer</b> - Click layer name to add it to the layer list.  Ctl-click to add it as visible</li>
</ul>

<h2>User Interface</h2> 
<h3>Overlays & Layers</h3>

<h4>Add Request Parameters</h4>

<div class="btn-overlay-controls-toggle"></div> 
Click to display a text input for specifying additional request parameters.
Reload map to apply the parameters.

<p>Examples:</p>
<ul>
	<li><code>cql_filter=NAME LIKE 'F%'</code></li>
	<li><code>cql_filter=BBOX(SHAPE,-123,49,-122,51,'EPSG:4326')</code></li>
</ul>

<h4>Add Layers from WMS Capabilities</h4>

<button class='btn-wms-layer-add'>+</button> Click to open <b>WMS Layers</b> panel.

<h4>Request Status</h4>

<button class='btn-query'>?</button> Click to display the <b>Request</b> panel.

<h4>WMS Proof Sheet</h4>

<button>Proof</button> Click to display a WMS Proof Sheet in a new window.
The Proof sheet shows images and legends of visible layers.
The Proof sheet can be converted to a savable HTML file.

<h4>Add Layers via text entry</h4>

<button class='btn-layer-add'>+</button> Add layers to an overlay by entering one or more layer names (comma-separated) 
and clicking button.

<h3>Extent</h3>
Enter an extent in the zoom box and click <span class="btn-zoom">Zoom</span>.

<h3>Auto-Reload</h3>
Check <b>Auto</b> to auto-reload visible overlays with a set frequency.
This collects load time statistics and allows assessing performance under load.

<h3>Logging</h3>
Enable logging to log all map requests.
<ul>
    <li><button>Log</button> Click to open the logging screen </li>
    <li>Check <b>Enable</b> to enable/disable logging
</ul>

<h3>Request Panel</h3>

<h4><span class='map-status-btn'>WMS</span> tab</h4>

Displays a WMS request URL based on the current map view.
<p>
Issues the request and displays information about the response.
<code>image/png</code> indicates a successful reponse.
Some kinds of response errors can be displayed.
</p>
<p>
The URL can be edited.
A link is provided to allow invoking the URL in a new browser window, or for copying the edited URL.
</p>

<h4><span class='map-status-btn'>WFS</span> tab</h4>

Displays a WFS request URL based on the current map view.



</body>
</html>