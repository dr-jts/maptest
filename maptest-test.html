<!DOCTYPE html>
<html>
<head></head>
<body onload="initPage()">

<h1>MapTest Unit Tests</h1>

<div id='log-div'>
 <table id='log' border='1'>

 </table>
</div>

<script type="text/javascript" src="lib/proj4js-compressed.js"></script>
<script type="text/javascript" src="lib/OpenLayers.js"></script>
<script type="text/javascript" src="lib/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="ol/ScaleEx.js"></script>
<script type="text/javascript" src="urlParams.js"></script>
<script type="text/javascript" src="maptest.js"></script>
<script type="text/javascript" src="Overlay.js"></script>
<script type="text/javascript" src="WMSProof.js"></script>
<script type="text/javascript">

function initPage() {
	
    test(MapTest.Util.extractHost, "a.b.c/foo/foo", "a.b.c");
    test(MapTest.Util.extractHost, "foo", "foo");
    test(MapTest.Util.extractHost, "https://foo", "foo");
    test(MapTest.Util.extractHost, "https://wf1geot.nrs.gov.bc.ca", "wf1geot.nrs.gov.bc.ca");
    test(MapTest.Util.extractHost, "https://wf1geot.nrs.gov.bc.ca/geoserver/wms", "wf1geot.nrs.gov.bc.ca");
}

function test(fn, input, expected) {
    var result = fn(input);
    var status = (result == expected);
    logTest(fn, status, input, expected, result);
}

function logTest(fn, status, input, expected, result) {
    var $name = $("<td>").text( fn.name );

    var stat = status ? "PASS" : "FAIL"
    var $status = $("<td>").text( stat );


    var $msg = $("<td>")
        .append( $('<div>').text(input) )
        .append( $('<div>').text(result) );
    if (! status ) {
        $status.css('background-color', '#ffdddd');
        $msg.append( $('<div>').text('Expected: ' + expected) );
    }
    var $line = $('<tr>')
        .append($name)
        .append($status)
        .append($msg);
    $('#log').append($line);
}

</script>
</body>
</html>